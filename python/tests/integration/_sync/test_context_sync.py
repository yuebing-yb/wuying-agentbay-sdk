# DO NOT EDIT THIS FILE MANUALLY.
# This file is auto-generated by scripts/generate_sync.py

"""Integration tests for context synchronization."""
import os
import pytest
import pytest

from agentbay import AgentBay


@pytest.fixture(scope="module")
def agent_bay():
    api_key = os.environ.get("AGENTBAY_API_KEY")
    if not api_key:
        pytest.skip("AGENTBAY_API_KEY environment variable not set")
    return AgentBay(api_key=api_key)


@pytest.fixture
def test_session(agent_bay):
    result = agent_bay.create()
    assert result.success
    yield result.session
    result.session.delete()


@pytest.mark.sync
def test_context_sync_status(test_session):
    """Test context synchronization status retrieval."""
    # Get context info to check sync status
    context_info = test_session.context.info()

    assert context_info is not None
    assert context_info.request_id != ""

    # The test just verifies we can retrieve context info successfully
    # context_status_data may be empty if no sync operations are in progress
    print(f"Context sync test completed, found {len(context_info.context_status_data)} status entries")


