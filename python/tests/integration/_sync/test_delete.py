# DO NOT EDIT THIS FILE MANUALLY.
# This file is auto-generated by scripts/generate_sync.py

"""Integration tests for Session delete operations."""
import os
import pytest
import pytest

from agentbay import AgentBay


@pytest.fixture(scope="module")
def agent_bay():
    """Create AsyncAgentBay instance."""
    api_key = os.environ.get("AGENTBAY_API_KEY")
    if not api_key:
        pytest.skip("AGENTBAY_API_KEY environment variable not set")
    return AgentBay(api_key=api_key)


@pytest.mark.sync
def test_delete_session_basic(agent_bay):
    """Test basic session deletion."""
    result = agent_bay.create()
    assert result.success is True
    session = result.session
    
    delete_result = session.delete()
    assert delete_result.success is True
    print(f"Session deleted: {session.session_id}")


@pytest.mark.sync
def test_delete_session_with_sync_context(agent_bay):
    """Test session deletion with context sync."""
    result = agent_bay.create()
    assert result.success is True
    session = result.session
    
    delete_result = session.delete(sync_context=True)
    assert delete_result.success is True
    print(f"Session deleted with context sync: {session.session_id}")


@pytest.mark.sync
def test_delete_multiple_sessions(agent_bay):
    """Test deleting multiple sessions."""
    sessions = []
    for i in range(3):
        result = agent_bay.create()
        assert result.success is True
        sessions.append(result.session)
    
    for session in sessions:
        delete_result = session.delete()
        assert delete_result.success is True
        print(f"Session {session.session_id} deleted")
    
    print(f"Deleted {len(sessions)} sessions")


@pytest.mark.sync
def test_delete_using_agent_bay(agent_bay):
    """Test deleting session using AgentBay.delete()."""
    result = agent_bay.create()
    assert result.success is True
    session = result.session
    
    delete_result = agent_bay.delete(session)
    assert delete_result.success is True
    print(f"Session deleted via AgentBay: {session.session_id}")

